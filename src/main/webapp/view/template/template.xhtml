<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:sec="http://www.springframework.org/security/tags">
<h:head>

    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"/>
    <meta HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT"/>
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/bootstrap/css/bootstrap.css"/>
    <!--<link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/bootstrap/css/bootstrap.min.css"/>-->

    <!-- MetisMenu CSS -->
    <link rel="stylesheet" type="text/css"
          href="#{request.contextPath}/resources/bootstrap/css/plugins/metisMenu/metisMenu.css"/>
    <!--<link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/bootstrap/css/plugins/metisMenu/metisMenu.min.css"/>-->

    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css"
          href="#{request.contextPath}/resources/bootstrap/css/plugins/dataTables.bootstrap.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/bootstrap/css/sb-admin-2.css"/>

    <!-- Custom Fonts -->
    <link rel="stylesheet" type="text/css"
          href="#{request.contextPath}/resources/bootstrap/font-awesome-4.1.0/css/font-awesome.css"/>

    <link rel="stylesheet" type="text/css"
          href="#{request.contextPath}/resources/bootstrap/css/plugins/social-buttons.css"/>
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/bootstrap/css/plugins/morris.css"/>
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/bootstrap/css/plugins/timeline.css"/>
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/css/autocompleteTooltip.css"/>


    <!-- jQuery Version 1.11.0 -->
    <script src="#{request.contextPath}/resources/bootstrap/js/jquery-1.11.0.js"/>

    <!--Bootstrap Core JavaScript-->
    <script src="#{request.contextPath}/resources/bootstrap/js/bootstrap.js"/>
    <script type="text/javascript" src="#{request.contextPath}/resources/js/controllers/sketch.js"/>
    <script type="text/javascript" src="#{request.contextPath}/resources/js/flexibleArea.js"/>
    <!--<script src="#{request.contextPath}/resources/bootstrap/js/bootstrap.min.js"/>-->


    <!-- Metis Menu Plugin JavaScript -->
    <script src="#{request.contextPath}/resources/bootstrap/js/plugins/metisMenu/metisMenu.js"/>
    <!--<script src="#{request.contextPath}/resources/bootstrap/js/plugins/metisMenu/metisMenu.min.js"/>-->

    <!--Data Table-->
    <!--<script src="#{request.contextPath}/resources/bootstrap/js/plugins/dataTables/jquery.dataTables.js"/>-->
    <!--<script src="#{request.contextPath}/resources/bootstrap/js/plugins/dataTables/dataTables.bootstrap.js"/>-->

    <script src="#{request.contextPath}/resources/bootstrap/js/sb-admin-2.js"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>-->
    <!--<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"/>-->
    <!--<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"/>-->
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/css/microphoneIconForInput.css"/>
    <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/css/customStyles.css"/>
    <script type="text/javascript" src="#{request.contextPath}/resources/js/voiceInput.js"/>
    <script type="text/javascript" src="#{request.contextPath}/resources/js/voice-control/annyang.min.js"/>
    <script type="text/javascript" src="#{request.contextPath}/resources/js/voice-control/speechkitt.min.js"/>
    <!--<script type="text/javascript" src="#{request.contextPath}/resources/js/speech.js"/>-->
    <!--<script type="text/javascript" src="#request.contextPath}/resources/js/sideHeartFeedback.js"/>-->

    <script type="text/javascript" src="#{request.contextPath}/resources/js/jstorage.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/js/autocompleteTooltip.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/js/json2.js"></script>


    <style type="text/css" media="print">
        /*for deleting url from header and footer on print*/
        @page {
            size: auto;   /* auto is the initial value */
            margin: 15mm 15mm 15mm 15mm;  /* this affects the margin in the printer settings */
        }

        @media print {
            .shc {
                display: none !important;
            }

            .no-print {
                display: none !important;
            }
            .ui-state-active .ui-icon {
                background-color: #000000 !important;
                -webkit-print-color-adjust: exact;
            }
            .ui-radiobutton{
                margin-right: 5px;
            }
            .ui-state-disabled{
                background: transparent !important;
                opacity: 1 !important;
            }
            .ui-radiobutton-icon{
                margin-left: 0px !important;
            }
            .ui-state-highlight{
                background-color: dodgerblue !important;
                -webkit-print-color-adjust: exact;
            }
            body
            {
                margin-bottom: 25mm;
                /*padding:25mm 25mm 25mm 25mm;*/
            }

        }
    </style>
    <script>
        $(function () {
            $('.ui-inputtextarea').flexible();
        });
    </script>

</h:head>
<script type="text/javascript">
    PrimeFaces.locales ['ru'] = {
        closeText: 'Закрыть',
        prevText: 'Назад',
        nextText: 'Вперёд',
        monthNames: ['Январь', 'Февраль' , 'Март' , 'Апрель' , 'Май' , 'Июнь' , 'Июль' , 'Август' , 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь' ],
        monthNamesShort: ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек' ],
        dayNames: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Субота'],
        dayNamesShort: ['Воск', 'Пон' , 'Вт' , 'Ср' , 'Четв' , 'Пят' , 'Суб'],
        dayNamesMin: ['В', 'П', 'Вт', 'С ', 'Ч', 'П ', 'Сб'],
        weekHeader: 'Неделя',
        firstDay: 1,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: '',
        timeOnlyTitle: 'Только время',
        timeText: 'Время',
        hourText: 'Час',
        minuteText: 'Минута',
        secondText: 'Секунда',
        currentText: 'Сегодня',
        ampm: false,
        month: 'Месяц',
        week: 'неделя',
        day: 'День',
        allDayText: 'Весь день'
    };
</script>

<h:body>
    <p:growl showDetail="true" sticky="true" autoUpdate="true" />
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12	col-md-12 col-lg-12">
                <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
                    <ui:insert name="header">
                        <ui:include src="header.xhtml"/>
                    </ui:insert>
                    <br/>
                    <div class="navbar-default sidebar" role="navigation">
                        <script type="text/javascript">
                            $(function () {
                                var isMobile = false;
                                if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) isMobile = true;
                                if(!isMobile) {
//                                    var offset = $("#fixed").offset();
//                                    var topPadding = 15;
//                                    $(window).scroll(function () {
//                                        if ($(window).scrollTop() > offset.top) {
//                                            $("#fixed").stop().animate({marginTop: $(window).scrollTop() - offset.top + topPadding});
//                                        }
//                                        else {
//                                            $("#fixed").stop().animate({marginTop: 0});
//                                        }
//
//                                    }); var offset = $("#fixed").offset();
//                                    var topPadding = 15;
//                                    $(window).scroll(function () {
//                                        if ($(window).scrollTop() > offset.top) {
//                                            $("#fixed").stop().animate({marginTop: $(window).scrollTop() - offset.top + topPadding});
//                                        }
//                                        else {
//                                            $("#fixed").stop().animate({marginTop: 0});
//                                        }
//
//                                    });
                                }
                            });
                        </script>
                        <div id="fixed">
                            <a title="Список ранее скопированных данных, которые можно перетащить мыщью на необходимое поле ввода."
                               href="#" id="helpCopyDialog" style="color: #428bca;"><i id="mtrx"
                                                                                       class="glyphicon glyphicon-paperclip"/>&#32;Шаблоны</a>&#160;
                            <p:commandButton id="addNewTemplateBtn" onclick="PF('addToltipDialog').show();"
                                             styleClass="glyphicon glyphicon-plus" style="width: 30px; height: 22px"
                                             value=""/>
                            <p:tooltip for="addNewTemplateBtn"
                                       value="Добавить новый шаблон, который можно многократно использовать для вставки в необходимые поля ввода."/>
                            <p:dialog closeOnEscape="true" header="Добавить шаблон" width="60%"
                                      widgetVar="addToltipDialog">
                                <h:inputTextarea id="newTemplateText" style="width: 100%; height: 100px"/>
                                <hr align="left" style="color: red ; border: 1px solid #cfd3e6;"/>
                                <p:commandButton title="sdf sf sd" id="addNewTemplateButton"
                                                 oncomplete="PF('addToltipDialog').hide();" style="float: right"
                                                 value="Добавить"/>
                            </p:dialog>
                        </div>
                        <div class="sidebar-nav navbar-collapse">

                            <sec:authorize access="hasRole('ADMINISTRATOR')">
                                <ui:insert name="adminLeftMenu">
                                    <ui:include src="adminLeftMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>
                            <sec:authorize access="hasRole('REGISTRATOR')">
                                <ui:insert name="registratorMenu">
                                    <ui:include src="registratorMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>
                            <sec:authorize access="hasRole('ADMISSION_ROOM_DOCTOR')">
                                <ui:insert name="admissionRoomMenu">
                                    <ui:include src="admissionRoomMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>
                            <sec:authorize access="hasAnyRole('DOCTOR', 'CHIEF')">
                                <ui:insert name="departmentMenu">
                                    <ui:include src="departmentMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>
                            <sec:authorize access="hasAnyRole('NURSE')">
                                <ui:insert name="nurseMenu">
                                    <ui:include src="nurseMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>
                            <sec:authorize access="hasAnyRole('LABORATORY')">
                                <ui:insert name="laboratoryMenu">
                                    <ui:include src="laboratoryLeftMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>
                            <sec:authorize access="hasAnyRole('RADIOGRAPHY')">
                                <ui:insert name="radiographyLeftMenu">
                                    <ui:include src="radiographyLeftMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>
                            <sec:authorize access="hasAnyRole('HEAD_PHYSICIAN')">
                                <ui:insert name="headPhysicianLeftMenu">
                                    <ui:include src="headPhysicianLeftMenu.xhtml"/>
                                </ui:insert>
                            </sec:authorize>

                        </div>
                    </div>
                </nav>

                <div id="page-wrapper" style="padding-bottom: 35px">
                    <!--<div class="col-xs-12 col-sm-12	col-md-12 col-lg-12">-->


                        <p:panel rendered="#{medicalCardViewController.medicalCard != null}" style="margin-top: 10px;">
                            <h4 class="text-center">Медицинская карта пациента № #{medicalCardViewController.medicalCard.medicalRegistrationNumber}</h4>
                            <h5 class="text-center">
                                #{medicalCardViewController.medicalCard.patient.fullName}
                                &#160;&#160;&#160;
                                <h:outputText value="#{medicalCardViewController.medicalCard.patient.birthday}"
                                              converter="#{localDateConverter}" pattern="dd.MM.yyyy"
                                              locale="ru"/>
                            </h5>
                            <p:button value="Перейти в начало медкарты" icon="glyphicon glyphicon-arrow-up"
                                      style="align-content: center" styleClass="center-block" outcome="medical card">
                                <f:param name="medicalCardId" value="#{medicalCardViewController.medicalCard.id}" />
                            </p:button>
                        </p:panel>
                        <br/><br/>
                        <ui:insert name="content"/>
                    <!--</div>-->
                </div>

                <ui:insert name="footer">
                    <ui:include src="footer.xhtml"/>
                </ui:insert>
            </div>
        </div>
    </div>

    <!--<h:outputScript>-->
       <!--playByteArray('#{textToVoiceController.speechBytes("Привет мир. Перейти в начало медкарты. Привет мир. Перейти в начало медкарты. Привет мир. Перейти в начало медкарты. ")}');-->
    <!--</h:outputScript>-->
    <!--<script type="text/javascript" src="#{request.contextPath}/resources/js/voice-contr.ol/voiceCommand.js"/>-->
</h:body>

</html>